<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script type="text/JavaScript">
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        //INBOX
        document.getElementById('inbox').innerHTML = "Inbox: " + geemails.length;

        //CURRENT DATE+TIME
        var tmonth=new Array("January","February","March","April","May","June","July","August","September","October","November","December");

        function GetClock(){
        var d=new Date();
        var nmonth=d.getMonth(),ndate=d.getDate(),nyear=d.getYear();
        if(nyear<1000) nyear+=1900;

        var nhour=d.getHours(),nmin=d.getMinutes(),ap;
        if(nhour==0){ap=" AM";nhour=12;}
        else if(nhour<12){ap=" AM";}
        else if(nhour==12){ap=" PM";}
        else if(nhour>12){ap=" PM";nhour-=12;}

        if(nmin<=9) nmin="0"+nmin;

        document.getElementById('clockbox').innerHTML=""+tmonth[nmonth]+" "+ndate+", "+nyear+" "+nhour+":"+nmin+ap+"";
        }

        GetClock();
        setInterval(GetClock,1000);

        //MESSAGES
        var addMailId = document.getElementById('messages').getElementsByTagName('tbody')[0];
        var newRow = addMailId.insertRow(addMailId.rows.length);
        var newCell;
        var newText; 
        var newDiv;
        for(var i = 0; i < geemails.length; i++) {
            addMail(geemails[i]);
        }

        function addMail(email) {
                    newCell = newRow.insertCell(0);
                    newText = document.createTextNode(email.date);
                    newCell.appendChild(newText);

                    newCell = newRow.insertCell(1);
                    newText = document.createTextNode(email.sender);
                    newCell.appendChild(newText);

                    newCell = newRow.insertCell(2);
                    newText = document.createTextNode(email.subject);
                    newCell.appendChild(newText);

                    newRow.onclick = function () {
                        alert(email.body);
                    }

                    newRow = addMailId.insertRow(addMailId.rows.length);
        }

        //INBOX BUTTON
        var emailNum = geemails.length;
        setInterval(function () {
            
            var inboxButton = document.getElementById("inboxbtn");
            inboxButton.onclick = function() {
                alert("You got mail!");

                addMail(getNewMessage());
                emailNum++;

                document.getElementById('inbox').innerHTML = "Inbox: " + emailNum;
            }
        }, 1000);

      };
    </script>

    <title>GeeMail</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"> 
	</head>
	<body>
		<div class="container" id="main">
			<div class="talk-bubble tri-right round btm-left" id="inboxbtn">
			  <div class="talktext">
			    <p id="inbox"></p>
			  </div>
			</div>
			<h1>GEEMAIL,</h1><br>
			<span id="clockbox"></span>
			<br>
			<br>
			<div align="center">
			<table id="messages">
			  <thead>
			    <tr>
			      <th>Date</th>
			      <th>Sender</th>
			      <th>Subject</th>
			    </tr>
			  </thead>
			  <tbody>
			  </tbody>
			</table>
			</div>
		</div>
	</body>
</html>